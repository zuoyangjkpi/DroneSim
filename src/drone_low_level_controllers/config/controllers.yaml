# Low-Level Controller Configuration for X3 Drone

waypoint_controller:
  ros__parameters:
    # Control parameters
    control_frequency: 70.0
    position_tolerance: 0.035     # meters
    velocity_tolerance: 0.05      # m/s
    waypoint_timeout: 2.2         # seconds before fail-safe hover engages

    # PID gains for position control (optimized for stable tracking)
    kp_xy: 1.25
    ki_xy: 0.015
    kd_xy: 0.55
    kp_z: 0.78
    ki_z: 0.015
    kd_z: 0.95

    # Velocity limits - aggressive but still stable
    max_velocity_xy: 3.6
    max_velocity_z: 1.3

    # Additional protections
    max_vertical_error: 1.6
    integral_limit_xy: 4.0
    integral_limit_z: 1.2

yaw_controller:
  ros__parameters:
    control_frequency: 180.0
    yaw_tolerance: 0.030
    kp_yaw: 1.15
    ki_yaw: 0.02
    kd_yaw: 0.45
    max_angular_velocity_yaw: 1.0
    max_yaw_step: 0.12
    derivative_filter_alpha: 0.35
    yaw_integral_limit: 1.0
multicopter_velocity_control_adapter:
  ros__parameters:
    control_frequency: 140.0
    max_linear_velocity_xy: 5.0
    max_linear_velocity_z: 2.5
    max_angular_velocity_xy: 2.5
    max_angular_velocity_z: 1.2
    linear_cmd_filter_alpha: 0.35
    yaw_rate_filter_alpha: 0.40
