# Low-Level Controller Configuration for X3 Drone

waypoint_controller:
  ros__parameters:
    # Control parameters
    control_frequency: 75.0
    position_tolerance: 0.035     # meters
    velocity_tolerance: 0.07      # m/s
    waypoint_timeout: 1.5         # seconds before fail-safe hover engages

    # PID gains for position control (optimized for stable tracking)
    kp_xy: 1.20
    ki_xy: 0.02
    kd_xy: 1.30
    kp_z: 0.75
    ki_z: 0.02
    kd_z: 3.00

    # Velocity limits - increased for faster tracking response
    max_velocity_xy: 8.5
    max_velocity_z: 3.8

attitude_controller:
  ros__parameters:
    # Control parameters
    control_frequency: 150.0     # Higher frequency for attitude loop
    attitude_tolerance: 0.035     # radians (约2.0°容差)

    # PID gains for attitude control (optimized for stable tracking)
    kp_roll: 1.10
    ki_roll: 0.02
    kd_roll: 1.40
    kp_pitch: 1.10
    ki_pitch: 0.02
    kd_pitch: 1.40
    kp_yaw: 1.70
    ki_yaw: 0.03
    kd_yaw: 0.90

    # Angular velocity limits
    max_angular_velocity_roll: 3.0
    max_angular_velocity_pitch: 3.0
    max_angular_velocity_yaw: 2.3
multicopter_velocity_control_adapter:
  ros__parameters:
    control_frequency: 140.0
    max_linear_velocity_xy: 8.5
    max_linear_velocity_z: 3.8
    max_angular_velocity_xy: 3.5
    max_angular_velocity_z: 2.4
